javascript: var target = document.querySelector('video');if (!target) {alert('No video detected.')};var chunks = [];var controlpanel = document.createElement('div');var recorder;var amountRecorded;document.body.appendChild(controlpanel);target.style.border = '5px solid red';controlpanel.style.height = '150px';controlpanel.style.border = '3px solid black';controlpanel.style.width = '400px';controlpanel.style.backgroundColor = 'white';controlpanel.style.position = 'fixed';controlpanel.style.bottom = '0%';controlpanel.style.left = '0%';controlpanel.style.zIndex = 30;controlpanel.style.paddingLeft = '10px';controlpanel.style.paddingTop = '10px';controlpanel.innerHTML = '<span style = "font-size:8px;line-height:6px;display:block">██╗░░░██╗██╗██████╗░██████╗░██╗██████╗░██████╗░███████╗██████╗░\n██║░░░██║██║██╔══██╗██╔══██╗██║██╔══██╗██╔══██╗██╔════╝██╔══██╗\n╚██╗░██╔╝██║██║░░██║██████╔╝██║██████╔╝██████╔╝█████╗░░██████╔╝\n░╚████╔╝░██║██║░░██║██╔══██╗██║██╔═══╝░██╔═══╝░██╔══╝░░██╔══██╗\n░░╚██╔╝░░██║██████╔╝██║░░██║██║██║░░░░░██║░░░░░███████╗██║░░██║\n░░░╚═╝░░░╚═╝╚═════╝░╚═╝░░╚═╝╚═╝╚═╝░░░░░╚═╝░░░░░╚══════╝╚═╝░░╚═╝\n</span>';controlpanel.innerHTML += '<br><p><button id = "startBtn1234">start recording</button><button id = "downloadBtn1234">stop / download</button></p><p><span id ="duration"></span><span id = "sizeDisp"></span></p> ';document.getElementById("startBtn1234").addEventListener('click',function () {getStream()});document.getElementById("downloadBtn1234").addEventListener('click',function () {download()});update();function getStream() {var stream;if (navigator.userAgent.includes('Firefox')){stream = target.mozCaptureStream(60)}else {stream = target.captureStream(60)};recorder = new MediaRecorder(stream, {mimeType: 'video/webm;codecs:vp9', bitsPerSecond: 1000000});recorder.addEventListener('dataavailable',function (e) {chunks.push(e.data);amountRecorded++;update()});recorder.start(100)};function update () {document.getElementById("duration").innerHTML = amountRecorded/10 + ' seconds recorded. ';let totalsize = 0;for (i=0;i<chunks.length;i++){totalsize += chunks[i].size};document.getElementById("sizeDisp").innerHTML = ' File size: '+Math.ceil(totalsize / 1000000)+ 'MB.'};function download () {recorder.pause();var dataPackage = new Blob(chunks,{type:'video/webm'});if (chunks.length = 0){alert('No data to download.');return;};setTimeout(function () {recorder = '';var url = window.URL.createObjectURL(dataPackage);var a = document.createElement('a');console.log(chunks);a.href = url;var fn = document.title;a.setAttribute('download',fn);a.click();chunks = [];amountRecorded = 0;update()},200)}
